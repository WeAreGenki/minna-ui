{#if _item.children === undefined}
  <!-- menu item -->

  <!-- htmlmin:ignore -->
  <a
    href="{item.url}"
    class="navbar-link{current === item.url ? ' navbar-link-active' : ''} {item.class || ''}"
    rel="{item.rel}"
  >
    {item.text}
  </a><!-- htmlmin:ignore -->
{:else}
  <!-- submenu folder -->

  <span class="navbar-nested">
    <span class="dn l-dib">{item.text}</span>

    <!-- htmlmin:ignore -->
    <div class="navbar-submenu {item.class || ''}">
      {#each item.children as submenuItem}
        <svelte:self item="{submenuItem}" current="{current}" />
      {/each}
    </div><!-- htmlmin:ignore -->
  </span>
{/if}

<style type="text/postcss">
  @import "./_variables.css";
  @import "import.css";

  .navbar-nested {
    position: relative;

    @media $(l) {
      padding: $navbar-link-padding;
      margin: 0;
      color: $navbar-link-color;
    }
  }

  .navbar-submenu {
    display: flex;
    flex-direction: column;

    @media $(l) {
      position: absolute;
      top: 100%;
      z-index: $navbar-zindex;
      white-space: nowrap;
      pointer-events: none;
      background-color: $navbar-background-color;
      box-shadow: $navbar-shadow;
      opacity: 0;
      transition:
        opacity $navbar-submenu-animate-speed-out ease-out,
        transform $navbar-submenu-animate-speed-out ease-out;
      transform: scale(0.8);
      transform-origin: 0 0;

      @if $navbar-submenu-optimize {
      will-change: opacity, transform;
      }

      /* open submenu from the right */
      :global(.navbar-left)& {
        right: 0;
        transform-origin: right 0;
      }

      .navbar-nested:hover &,
      .navbar-nested:focus & {
        pointer-events: unset;
        opacity: 1;
        transition-duration: $navbar-submenu-animate-speed-in;
        transform: scale(1);
      }
    }
  }
</style>
